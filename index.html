<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hacker Pattern Solver</title>
  <style>
    body {
      background-color: black;
      color: #00FF00;
      font-family: 'Courier New', monospace;
      padding: 20px;
    }
    .pattern {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .result, .flag {
      margin-top: 10px;
      font-weight: bold;
    }
    .flag {
      font-size: 18px;
      color: #00FF00;
    }
    input[type="number"] {
      width: 80px;
      padding: 5px;
      font-size: 18px;
      background-color: #003300;
      color: #00FF00;
      border: 1px solid #00FF00;
    }
    button {
      padding: 6px 12px;
      font-size: 16px;
      background-color: #002200;
      color: #00FF00;
      border: 1px solid #00FF00;
      cursor: pointer;
    }
    button:hover {
      background-color: #004400;
    }
  </style>
</head>
<body>

  <h2>üß† Level <span id="levelDisplay">1</span>: Solve the Pattern</h2>
  <div class="pattern" id="patternDisplay"></div>
  <button onclick="checkAnswer()">Submit</button>
  <div class="result" id="result"></div>
  <div class="flag" id="flagDisplay"></div>

  <script>
    let sequence = [];
    let correctAnswer;
    let missingIndex;
    let level = 1;

    function generatePattern() {
      const start = Math.floor(Math.random() * 5) + 2;
      const isGeometric = level % 2 === 0;
      const modifier = Math.floor(level / 2) + 2;
      const length = Math.min(6 + level, 10);

      sequence = [start];

      for (let i = 1; i < length; i++) {
        const next = isGeometric
          ? sequence[i - 1] * modifier
          : sequence[i - 1] + modifier;
        sequence.push(next);
      }

      missingIndex = Math.floor(Math.random() * (length - 2)) + 1;
      correctAnswer = sequence[missingIndex];

      const display = sequence.map((val, idx) =>
        idx === missingIndex ? `<input type="number" id="userInput">` : val
      ).join(", ");

      document.getElementById("patternDisplay").innerHTML = display;
      document.getElementById("levelDisplay").textContent = level;
      document.getElementById("result").textContent = "";
      document.getElementById("flagDisplay").textContent = "";
    }

    function generateFlag(level) {
      const base = "FLAG{LEVEL_";
      const suffix = Math.random().toString(36).substring(2, 6).toUpperCase();
      return `${base}${level}_${suffix}}`;
    }

    function checkAnswer() {
      const userVal = parseInt(document.getElementById('userInput').value);
      const result = document.getElementById('result');
      const flag = document.getElementById('flagDisplay');

      if (userVal === correctAnswer) {
        result.textContent = "‚úÖ Correct! Leveling up...";
        result.style.color = "#00FF00";
        const newFlag = generateFlag(level);
        flag.textContent = `üéâ FLAG UNLOCKED: ${newFlag}`;
        level++;
      } else {
        result.textContent = `‚ùå Incorrect. Correct answer: ${correctAnswer}. Try again.`;
        result.style.color = "red";
      }

      setTimeout(generatePattern, 4000);
    }

    generatePattern();
  </script>

</body>
</html>
